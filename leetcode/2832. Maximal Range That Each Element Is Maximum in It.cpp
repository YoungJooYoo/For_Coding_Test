class Solution 
{
public:
    vector<int> maximumLengthOfRanges(const vector<int>& nums) 
    {
        const int n = nums.size();
        vector<int> left(n, -1);  // ì™¼ìª½ ê²½ê³„
        vector<int> right(n, n);  // ì˜¤ë¥¸ìª½ ê²½ê³„
        stack<int> s;

        // ì™¼ìª½ ê²½ê³„ ì°¾ê¸° (ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ)
        for (int i = 0; i < n; ++i)
        {
            while (!s.empty() && nums[s.top()] < nums[i])
            {
                s.pop();
            }
            if (!s.empty())
            {
                left[i] = s.top();
            }
            s.push(i);
        }

        // ìŠ¤íƒ ì´ˆê¸°í™”
        while (!s.empty())
        {
            s.pop();
        } 

        // ì˜¤ë¥¸ìª½ ê²½ê³„ ì°¾ê¸° (ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ìœ¼ë¡œ)
        for (int i = n - 1; i >= 0; --i)
        {
            while(!s.empty() && nums[s.top()] < nums[i]) 
            {
                s.pop();
            }
            if(!s.empty())
            {
                right[i] = s.top();
            }
            s.push(i);
        }

        // ans ë°°ì—´ ê³„ì‚°, max sub array length
        vector<int> ans(n, 0);
        for (int i = 0; i < n; ++i)
        {
            ans[i] = right[i] - left[i] - 1;
        }

        return ans; 
    }
};

// https://leetcode.com/problems/maximal-range-that-each-element-is-maximum-in-it/

/*

2832. ê° ìš”ì†Œê°€ ìµœëŒ€ì¸ ìµœëŒ€ ë²”ìœ„

ì¤‘ê°„ ë‚œì´ë„

ì£¼ì œ

	â€¢	ë°°ì—´
	â€¢	ìŠ¤íƒ
	â€¢	ìŠ¤íƒì„ ì´ìš©í•œ ì•Œê³ ë¦¬ì¦˜

ê¸°ì—…

íŒíŠ¸
ì£¼ì–´ì§„ ë°°ì—´ numsì—ì„œ ê° ìš”ì†Œê°€ í•´ë‹¹ ì„œë¸Œë°°ì—´ì˜ ìµœëŒ€ê°’ì´ ë˜ëŠ” ê°€ì¥ ê¸´ ì„œë¸Œë°°ì—´ì˜ ê¸¸ì´ë¥¼ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤. ìŠ¤íƒì„ í™œìš©í•˜ì—¬ íš¨ìœ¨ì ìœ¼ë¡œ ê° ìš”ì†Œì˜ ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½ì—ì„œ ìì‹ ë³´ë‹¤ í° ìš”ì†Œë¥¼ ì°¾ëŠ” ë°©ë²•ì„ ê³ ë ¤í•´ë³´ì„¸ìš”.

ğŸ“„ ë¬¸ì œ ì„¤ëª…

ê³ ìœ í•œ ì •ìˆ˜ë¡œ ì´ë£¨ì–´ì§„ 0-ì¸ë±ìŠ¤ ë°°ì—´ numsê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤.

ê°™ì€ ê¸¸ì´ì˜ 0-ì¸ë±ìŠ¤ ë°°ì—´ ansë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•©ë‹ˆë‹¤:

	â€¢	ans[i]ëŠ” ì„œë¸Œë°°ì—´ nums[l..r]ì˜ ìµœëŒ€ ê¸¸ì´ë¡œ, ì´ ì„œë¸Œë°°ì—´ì—ì„œ ìµœëŒ€ ìš”ì†Œê°€ nums[i]ì™€ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤.

ë°°ì—´ì—ì„œ ì„œë¸Œë°°ì—´ì´ë€, ë°°ì—´ì˜ ì—°ì†ëœ ë¶€ë¶„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ë°°ì—´ numsë¥¼ ë§Œì¡±í•˜ëŠ” ë°°ì—´ ansë¥¼ ë°˜í™˜í•˜ì„¸ìš”.

ğŸ’¡ ì˜ˆì œ 1:

ì…ë ¥: nums = [1,5,4,3,6]
ì¶œë ¥: [1,4,2,1,5]

ì„¤ëª…:

	â€¢	nums[0] = 1ì¼ ë•Œ, 1ì´ ìµœëŒ€ì¸ ê°€ì¥ ê¸´ ì„œë¸Œë°°ì—´ì€ nums[0..0]ë¡œ ê¸¸ì´ëŠ” 1ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ans[0] = 1.
	â€¢	nums[1] = 5ì¼ ë•Œ, 5ê°€ ìµœëŒ€ì¸ ê°€ì¥ ê¸´ ì„œë¸Œë°°ì—´ì€ nums[0..3]ë¡œ ê¸¸ì´ëŠ” 4ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ans[1] = 4.
	â€¢	nums[2] = 4ì¼ ë•Œ, 4ê°€ ìµœëŒ€ì¸ ê°€ì¥ ê¸´ ì„œë¸Œë°°ì—´ì€ nums[2..3]ë¡œ ê¸¸ì´ëŠ” 2ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ans[2] = 2.
	â€¢	nums[3] = 3ì¼ ë•Œ, 3ì´ ìµœëŒ€ì¸ ê°€ì¥ ê¸´ ì„œë¸Œë°°ì—´ì€ nums[3..3]ë¡œ ê¸¸ì´ëŠ” 1ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ans[3] = 1.
	â€¢	nums[4] = 6ì¼ ë•Œ, 6ì´ ìµœëŒ€ì¸ ê°€ì¥ ê¸´ ì„œë¸Œë°°ì—´ì€ nums[0..4]ë¡œ ê¸¸ì´ëŠ” 5ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ans[4] = 5.

ğŸ’¡ ì˜ˆì œ 2:

ì…ë ¥: nums = [1,2,3,4,5]
ì¶œë ¥: [1,2,3,4,5]

ì„¤ëª…:
ê° nums[i]ì— ëŒ€í•´, í•´ë‹¹ ìš”ì†Œê°€ ìµœëŒ€ì¸ ê°€ì¥ ê¸´ ì„œë¸Œë°°ì—´ì€ í•­ìƒ nums[0..i]ì´ë¯€ë¡œ, ans[i] = i + 1ì…ë‹ˆë‹¤.

ğŸ“Œ ì œì•½ ì‚¬í•­:

	â€¢	1 <= nums.length <= 10^5
	â€¢	1 <= nums[i] <= 10^5
	â€¢	numsì˜ ëª¨ë“  ìš”ì†ŒëŠ” ì„œë¡œ ë‹¤ë¦…ë‹ˆë‹¤. (ì¦‰, numsëŠ” 1ë¶€í„° nums.lengthê¹Œì§€ì˜ ì •ìˆ˜ì˜ ìˆœì—´ì…ë‹ˆë‹¤.)

ğŸ§  íŒíŠ¸

ì´ ë¬¸ì œëŠ” ê° ìš”ì†Œê°€ ìì‹ ì˜ ìµœëŒ€ ë²”ìœ„ì—ì„œ ì–¼ë§ˆë‚˜ ë©€ë¦¬ í™•ì¥ë  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì°¾ëŠ” ë¬¸ì œì…ë‹ˆë‹¤. ì´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í•´ê²°í•˜ê¸° ìœ„í•´ ìŠ¤íƒì„ ì‚¬ìš©í•˜ì—¬ ê° ìš”ì†Œì˜ ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½ì—ì„œ ìì‹ ë³´ë‹¤ í° ìš”ì†Œì˜ ìœ„ì¹˜ë¥¼ ì°¾ëŠ” ë°©ë²•ì„ ê³ ë ¤í•´ë³´ì„¸ìš”. ì´ë ‡ê²Œ í•˜ë©´ ê° ìš”ì†Œì— ëŒ€í•´ O(1) ì‹œê°„ì— ìµœëŒ€ ë²”ìœ„ë¥¼ ê³„ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ“˜ í•´ê²° ë°©ë²• ê°œìš”

	1.	ì™¼ìª½ ê²½ê³„ ì°¾ê¸°:
	â€¢	ê° ìš”ì†Œì˜ ì™¼ìª½ì—ì„œ ìì‹ ë³´ë‹¤ í° ìš”ì†Œì˜ ìœ„ì¹˜ë¥¼ ì°¾ìŠµë‹ˆë‹¤.
	2.	ì˜¤ë¥¸ìª½ ê²½ê³„ ì°¾ê¸°:
	â€¢	ê° ìš”ì†Œì˜ ì˜¤ë¥¸ìª½ì—ì„œ ìì‹ ë³´ë‹¤ í° ìš”ì†Œì˜ ìœ„ì¹˜ë¥¼ ì°¾ìŠµë‹ˆë‹¤.
	3.	ìµœëŒ€ ë²”ìœ„ ê³„ì‚°:
	â€¢	ì™¼ìª½ ê²½ê³„ì™€ ì˜¤ë¥¸ìª½ ê²½ê³„ë¥¼ ì´ìš©í•˜ì—¬ ê° ìš”ì†Œê°€ ìµœëŒ€ì¸ ì„œë¸Œë°°ì—´ì˜ ê¸¸ì´ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
	4.	ê²°ê³¼ ë°°ì—´ êµ¬ì„±:
	â€¢	ê³„ì‚°ëœ ìµœëŒ€ ë²”ìœ„ ê¸¸ì´ë¥¼ ans ë°°ì—´ì— ì €ì¥í•©ë‹ˆë‹¤.

ìŠ¤íƒì„ ì´ìš©í•˜ì—¬ ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½ ê²½ê³„ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì°¾ì„ ìˆ˜ ìˆìœ¼ë©°, ì „ì²´ ì•Œê³ ë¦¬ì¦˜ì˜ ì‹œê°„ ë³µì¡ë„ëŠ” O(n)ì…ë‹ˆë‹¤.
*/
