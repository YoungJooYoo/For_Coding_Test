class Solution 
{
public:
    int stoneGameII(const vector<int>& piles) 
    {
        int n = piles.size();
        // dp[i][M] 정의
        vector<vector<int>> dp(n + 1, vector<int>(n + 1, 0));
        vector<int> suffixSum(n + 1, 0);

        // suffixSum[i]는 i번 무더기부터 끝까지의 돌의 총합
        for (int i = n - 1; i >= 0; --i) 
        {
            suffixSum[i] = suffixSum[i + 1] + piles[i];
        }

        // i번 무더기부터 시작하여 M이 주어졌을 때, 최대 돌의 수 계산
        for (int i = n - 1; i >= 0; --i) 
        {
            for (int M = 1; M <= n; ++M) 
            {
                for (int X = 1; X <= 2 * M && i + X <= n; ++X) 
                {
                    dp[i][M] = max(dp[i][M], suffixSum[i] - dp[i + X][max(M, X)]);
                }
            }
        }

        return dp[0][1];
    }
};

// https://leetcode.com/problems/stone-game-ii/description/?envType=daily-question&envId=2024-08-20

/*
### 문제 번역:

1140. 돌 게임 II (Stone Game II)

난이도: 중간

**문제 설명:**

앨리스와 밥이 돌무더기 게임을 계속하고 있습니다. 여러 개의 돌무더기가 일렬로 배치되어 있으며, 
각 무더기에는 양의 정수 개수의 돌이 있습니다 (`piles[i]`). 게임의 목표는 가장 많은 돌을 얻는 것입니다.
앨리스와 밥은 차례대로 돌을 가져가며, 앨리스가 먼저 시작합니다. 처음에는 `M = 1`입니다.
각 플레이어의 턴에서, 플레이어는 남아 있는 첫 `X`개의 돌무더기에서 모든 돌을 가져갈 수 있으며, 
여기서 `1 <= X <= 2M`입니다. 그런 다음, `M`을 `max(M, X)`로 설정합니다.
게임은 모든 돌이 다 가져갈 때까지 계속됩니다.
앨리스와 밥이 최적의 방법으로 게임을 한다고 가정할 때, 앨리스가 가져갈 수 있는 최대 돌의 수를 반환하세요.

**예제 1:**

- 입력: `piles = [2,7,9,4,4]`
- 출력: `10`
- 설명: 
  - 앨리스가 처음에 하나의 돌무더기를 가져가면, 밥은 두 개의 돌무더기를 가져갈 수 있습니다. 그런 다음 앨리스가 두 개의 돌무더기를 다시 가져가면 앨리스는 총 `2 + 4 + 4 = 10`개의 돌을 얻을 수 있습니다.
  - 앨리스가 처음에 두 개의 돌무더기를 가져가면, 밥은 남은 세 개의 돌무더기를 모두 가져갈 수 있습니다. 이 경우 앨리스는 총 `2 + 7 = 9`개의 돌을 얻을 수 있습니다.
  - 그래서 우리는 더 큰 값인 10을 반환합니다.

**예제 2:**

- 입력: `piles = [1,2,3,4,5,100]`
- 출력: `104`
  
**제약 조건:**

- `1 <= piles.length <= 100`
- `1 <= piles[i] <= 10^4`

---

### 문제 설명:

이 문제는 동적 계획법(DP)을 사용하여 최적의 방법으로 게임을 진행했을 때, 앨리스가 얻을 수 있는 최대 돌의 수를 계산하는 문제입니다.

#### 핵심 개념:

1. **DP 상태 정의**:
   - `dp[i][M]`: 남아 있는 돌무더기 `piles[i:]`에 대해, `M` 값이 주어졌을 때, 앨리스가 가져갈 수 있는 최대 돌의 수.

2. **점화식**:
   - 각 턴에서 플레이어는 `1`부터 `2M`까지의 돌무더기를 가져갈 수 있습니다. 그리고 각 선택에 대해 남은 돌무더기에 대해 밥이 얻을 수 있는 최적의 결과를 빼면 됩니다.

3. **최종 해답**:
   - `dp[0][1]` 값이 앨리스가 게임을 시작할 때 최적으로 가져갈 수 있는 최대 돌의 수를 나타냅니다.
*/
